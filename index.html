<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>???</title>
  <link rel="icon" type="image/png" sizes="32x32" href="images/icon.png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #000;
      color: #fff;
      overflow-x: hidden;
    }

    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .content-wrapper {
      position: relative;
      z-index: 1;
    }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(103, 6, 118, 0.3);
      z-index: 1000;
      transform: translateY(-100%);
    }

    nav {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.25rem;
      font-weight: bold;
      opacity: 0;
    }

    .logo svg {
      color: #670676;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      list-style: none;
      align-items: center;
    }

    .nav-links li {
      opacity: 0;
      transform: translateY(-20px);
    }

    .nav-links a {
      color: #fff;
      text-decoration: none;
      transition: color 0.3s;
      position: relative;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: #670676;
      transition: width 0.3s;
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    .nav-links a:hover {
      color: #670676;
    }

    .lang-switcher {
      background: rgba(103, 6, 118, 0.2);
      border: 1px solid rgba(103, 6, 118, 0.3);
      color: #670676;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .lang-switcher:hover {
      background: rgba(103, 6, 118, 0.4);
      border-color: #670676;
      transform: scale(1.05);
    }

    .menu-toggle {
      display: none;
      background: none;
      border: none;
      color: #fff;
      font-size: 1.5rem;
      cursor: pointer;
    }

    #home {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8rem 1.5rem 5rem;
      text-align: center;
    }

    .hero-content {
      opacity: 1;
    }

    .hero-icon {
      width: 128px;
      height: 128px;
      margin: 0 auto 2rem;
      border-radius: 50%;
      background: linear-gradient(135deg, #670676, #7b1fa2);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 60px rgba(103, 6, 118, 0.6);
      transform: scale(0);
    }

    h1 {
      font-size: 3.5rem;
      margin-bottom: 1.5rem;
    }
    
    h1 span {
      display: block;
      opacity: 0;
      background: linear-gradient(90deg, #670676, #a855f7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    #welcomeText {
      background: linear-gradient(135deg, #670676, #8800aa, #a855f7, #c084fc);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease infinite;
    }

    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    .scroll-indicator {
      position: relative;
      margin-top: 5rem;
      opacity: 0;
    }

    .scroll-indicator::before {
      content: '';
      display: block;
      width: 2px;
      height: 50px;
      background: linear-gradient(to bottom, #670676, transparent);
      margin: 0 auto 10px;
      animation: scrollAnimation 2s infinite;
    }

    @keyframes scrollAnimation {
      0%, 100% { transform: translateY(0); opacity: 1; }
      50% { transform: translateY(15px); opacity: 0.5; }
    }

    #projects {
      min-height: 100vh;
      padding: 5rem 1.5rem;
      background: linear-gradient(to bottom, #000, rgba(103, 6, 118, 0.1));
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h2 {
      font-size: 2.5rem;
      text-align: center;
      margin-bottom: 3rem;
      padding-bottom: 0.5rem;
      border-bottom: 4px solid #670676;
      display: inline-block;
      width: 100%;
      opacity: 0;
    }

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .project-card {
      background: linear-gradient(135deg, #111, #000);
      border: 1px solid rgba(103, 6, 118, 0.3);
      border-radius: 12px;
      padding: 2rem;
      transition: all 0.3s;
      opacity: 0;
      transform: translateY(50px);
    }

    .project-card:hover {
      border-color: #670676;
      box-shadow: 0 8px 32px rgba(103, 6, 118, 0.4);
      transform: translateY(-8px) scale(1.02);
    }

    .project-icon {
      color: #670676;
      margin-bottom: 1rem;
    }

    .project-card h3 {
      font-size: 1.5rem;
      margin-bottom: 0.75rem;
    }

    .project-card p {
      color: #9ca3af;
      margin-bottom: 1.5rem;
    }

    .coming-soon {
      display: inline-block;
      padding: 0.5rem 1rem;
      background: rgba(103, 6, 118, 0.2);
      color: #670676;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 600;
    }

    .view-btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      background: #670676;
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .view-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .view-btn:hover::before {
      width: 300px;
      height: 300px;
    }

    .view-btn:hover {
      background: rgba(103, 6, 118, 0.8);
      transform: scale(1.05);
    }

    .add-project {
      background: linear-gradient(135deg, rgba(17, 17, 17, 0.5), rgba(0, 0, 0, 0.5));
      border: 2px dashed rgba(103, 6, 118, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 250px;
      transition: all 0.3s;
    }

    .add-project:hover {
      border-color: rgba(103, 6, 118, 0.6);
      background: linear-gradient(135deg, rgba(17, 17, 17, 0.7), rgba(0, 0, 0, 0.7));
    }

    .add-project svg {
      color: rgba(103, 6, 118, 0.5);
      margin-bottom: 1rem;
    }

    .add-project p {
      color: #6b7280;
      text-align: center;
    }

    #about {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 5rem 1.5rem;
    }

    .about-content {
      max-width: 800px;
      margin: 0 auto;
      background: linear-gradient(135deg, #111, #000);
      border: 1px solid rgba(103, 6, 118, 0.3);
      border-radius: 12px;
      padding: 2rem;
      opacity: 0;
      transform: translateX(-100px);
    }

    .about-content p {
      font-size: 1.125rem;
      color: #d1d5db;
      line-height: 1.8;
      margin-bottom: 1.5rem;
    }

    footer {
      padding: 2rem 1.5rem;
      border-top: 1px solid rgba(103, 6, 118, 0.3);
      text-align: center;
      opacity: 0;
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1rem;
    }

    .social-links a {
      color: #9ca3af;
      transition: all 0.3s;
      display: inline-block;
    }

    .social-links a:hover {
      color: #670676;
      transform: translateY(-5px) rotate(360deg);
    }

    footer p {
      color: #6b7280;
    }

    .particle {
      position: fixed;
      width: 2px;
      height: 2px;
      background: #670676;
      border-radius: 50%;
      pointer-events: none;
      z-index: 2;
    }

    .music-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10;
      background: rgba(0, 0, 0, 0.9);
      border: 2px solid #670676;
      border-radius: 12px;
      padding: 10px 15px;
      box-shadow: 0 0 30px rgba(103, 6, 118, 0.6);
      cursor: move;
      user-select: none;
    }

    .music-controls:active {
      cursor: grabbing;
    }

    .drag-handle {
      text-align: center;
      padding: 4px;
      margin: -10px -15px 8px -15px;
      background: #670676;
      border-radius: 10px 10px 0 0;
      cursor: grab;
      font-size: 11px;
      color: white;
    }

    .drag-handle:active {
      cursor: grabbing;
    }

    .music-controls button {
      background: #670676;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-size: 11px;
      font-weight: bold;
      margin: 3px;
      box-shadow: 0 0 15px rgba(103, 6, 118, 0.5);
      transition: all 0.3s;
    }

    .music-controls button:hover {
      background: #8800aa;
      box-shadow: 0 0 25px rgba(103, 6, 118, 0.9);
      transform: scale(1.05);
    }

    .music-controls input[type="range"] {
      width: 120px;
      margin: 6px 3px;
      accent-color: #670676;
    }

    .music-label {
      color: #670676;
      font-size: 11px;
      font-weight: bold;
      text-shadow: 0 0 10px #670676;
      display: block;
      margin-bottom: 3px;
    }

    .volume-container {
      margin-top: 10px;
    }

    .music-status {
      color: white;
      font-size: 12px;
      margin-top: 5px;
      text-align: center;
    }

    .playlist {
      max-height: 150px;
      overflow-y: auto;
      margin-top: 6px;
      padding: 3px;
    }

    .playlist-item {
      background: rgba(103, 6, 118, 0.3);
      border: 1px solid #670676;
      border-radius: 4px;
      padding: 5px;
      margin: 3px 0;
      color: white;
      font-size: 10px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .playlist-item:hover {
      background: rgba(103, 6, 118, 0.6);
      transform: translateX(5px);
    }

    .playlist-item.active {
      background: #670676;
      box-shadow: 0 0 15px rgba(103, 6, 118, 0.8);
    }

    .playlist-item .delete-btn {
      background: rgba(255, 0, 0, 0.5);
      border: none;
      color: white;
      padding: 2px 6px;
      border-radius: 2px;
      cursor: pointer;
      font-size: 9px;
    }

    .playlist-item .delete-btn:hover {
      background: rgba(255, 0, 0, 0.8);
    }

    .playlist::-webkit-scrollbar {
      width: 8px;
    }

    .playlist::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 4px;
    }

    .playlist::-webkit-scrollbar-thumb {
      background: #670676;
      border-radius: 4px;
    }

    .playlist::-webkit-scrollbar-thumb:hover {
      background: #8800aa;
    }

    #youtubeUrl::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    #youtubePlayer {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 240px;
      height: 160px;
      z-index: 1001;
      border: 2px solid #670676;
      border-radius: 8px;
      box-shadow: 0 0 30px rgba(103, 6, 118, 0.6);
    }

    .audio-visualizer {
      margin: 15px 0;
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid #670676;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 0 20px rgba(103, 6, 118, 0.4);
    }

    #visualizerCanvas {
      width: 100%;
      height: 80px;
      border-radius: 5px;
    }

    @media (max-width: 768px) {
      .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.95);
        flex-direction: column;
        padding: 1rem 1.5rem;
        gap: 1rem;
      }

      .nav-links.active {
        display: flex;
      }

      .menu-toggle {
        display: block;
      }

      h1 {
        font-size: 2.5rem;
      }

      h2 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="music-controls" id="musicControls">
    <div class="drag-handle">‚ãÆ‚ãÆ DRAG ME ‚ãÆ‚ãÆ</div>
    <div class="music-label">üéµ MUSIC PLAYER</div>
    <input type="file" id="musicFile" accept="audio/*" multiple style="display: none;">
    <button id="uploadBtn">üìÅ ADD MUSIC</button>
    <input type="text" id="youtubeUrl" placeholder="YouTube URL" style="width: 100%; padding: 5px; margin: 3px 0; background: rgba(103, 6, 118, 0.2); border: 1px solid #670676; border-radius: 4px; color: white; font-size: 10px;">
    <button id="addYoutubeBtn">üì∫ ADD YOUTUBE</button>
    <div class="music-label" style="font-size: 9px; margin-top: 3px; color: rgba(255, 255, 255, 0.7);" data-lang-key="youtube-visualizer-note">‚ÄªYouTube„ÅßËøΩÂä†„Åó„ÅüÊõ≤„ÅØ„Ç™„Éº„Éá„Ç£„Ç™„Çπ„Éö„ÇØ„Éà„É©„É†ÈùûÂØæÂøú„Åß„Åô„ÄÇ</div>
    <button id="playBtn">‚ñ∂ PLAY</button>
    <button id="pauseBtn">‚è∏ PAUSE</button>
    <button id="nextBtn">‚è≠ NEXT</button>
    
    <div class="audio-visualizer">
      <canvas id="visualizerCanvas"></canvas>
    </div>
    
    <div class="volume-container">
      <label class="music-label" for="volumeSlider">VOLUME</label>
      <input type="range" id="volumeSlider" min="0" max="100" value="50">
    </div>
    <div class="music-status" id="musicStatus">No tracks</div>
    <div class="playlist" id="playlist"></div>
  </div>

  <audio id="bgMusic" loop></audio>
  <div id="youtubePlayer"></div>
  <div id="canvas-container"></div>
  
  <div class="content-wrapper">
    <header id="header">
      <nav>
        <div class="logo" id="logo">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="16 18 22 12 16 6"></polyline>
            <polyline points="8 6 2 12 8 18"></polyline>
          </svg>
          <span>hello</span>
        </div>
        <button class="menu-toggle" id="menuToggle">‚ò∞</button>
        <ul class="nav-links" id="navLinks">
          <li><a href="#home" data-lang-key="nav-home">„Éõ„Éº„É†</a></li>
          <li><a href="#projects" data-lang-key="nav-projects">„Éó„É≠„Ç∏„Çß„ÇØ„Éà</a></li>
          <li><a href="#about" data-lang-key="nav-about">„Åì„ÅÆ„Çµ„Ç§„Éà„Å´„Å§„ÅÑ„Å¶</a></li>
          <li>
            <button class="lang-switcher" id="langSwitcher">EN</button>
          </li>
        </ul>
      </nav>
    </header>

    <section id="home">
      <div class="hero-content">
        <div class="hero-icon" id="heroIcon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <polyline points="16 18 22 12 16 6"></polyline>
            <polyline points="8 6 2 12 8 18"></polyline>
          </svg>
        </div>
        <h1 id="heroTitle">
          <span id="welcomeText" data-lang-key="welcome">„Çà„ÅÜ„Åì„Åù</span>
        </h1>
        <div class="scroll-indicator" id="scrollIndicator">
          <span style="color: #670676;" data-lang-key="scroll">„Çπ„ÇØ„É≠„Éº„É´</span>
        </div>
      </div>
    </section>

    <section id="projects">
      <div class="container">
        <h2 id="projectsTitle" data-lang-key="projects-title">„Éó„É≠„Ç∏„Çß„ÇØ„Éà</h2>
        <div class="projects-grid" id="projectsGrid"></div>
      </div>
    </section>

    <section id="about">
      <div class="container">
        <h2 id="aboutTitle" data-lang-key="about-title">„Åì„ÅÆ„Çµ„Ç§„Éà„Å´„Å§„ÅÑ„Å¶</h2>
        <div class="about-content" id="aboutContent">
          <p data-lang-key="about-text">noct„ÅåÊ∞ó„Åæ„Åæ„Å´Âà∂‰Ωú„Åó„Åü‰ΩúÂìÅ„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åô„ÇãÂ†¥ÊâÄ„Åß„Åô„ÄÇ</p>
        </div>
      </div>
    </section>

    <footer id="footer">
      <div class="social-links">
        <a href="#" aria-label="GitHub">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
        </a>
      </div>
      <p>¬© 2026 noct.</p>
    </footer>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

  <script>
    // YouTube IFrame API„ÇíÂãïÁöÑ„Å´Ë™≠„ÅøËæº„ÇÄ
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    
    const audio = document.getElementById('bgMusic');
    const uploadBtn = document.getElementById('uploadBtn');
    const musicFile = document.getElementById('musicFile');
    const addYoutubeBtn = document.getElementById('addYoutubeBtn');
    const youtubeUrl = document.getElementById('youtubeUrl');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const nextBtn = document.getElementById('nextBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const musicStatus = document.getElementById('musicStatus');
    const playlistDiv = document.getElementById('playlist');
    const youtubePlayerDiv = document.getElementById('youtubePlayer');

    let youtubePlayer = null;
    let isYoutubeReady = false;
    let youtubeReadyCheckInterval = null;
    let isPlayingYouTube = false;

    const visualizerCanvas = document.getElementById('visualizerCanvas');
    const canvasCtx = visualizerCanvas.getContext('2d');
    let audioContext, analyser, dataArray, bufferLength, source;

    function setupAudioContext() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        analyser = audioContext.createAnalyser();
        analyser.fftSize = 256;
        bufferLength = analyser.frequencyBinCount;
        dataArray = new Uint8Array(bufferLength);
        
        source = audioContext.createMediaElementSource(audio);
        source.connect(analyser);
        analyser.connect(audioContext.destination);
        
        drawVisualizer();
      }
    }

    // YouTubeÂÜçÁîüÁî®„ÅÆ„É©„É≥„ÉÄ„É†„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
    let randomDataArray = new Uint8Array(128);
    function drawRandomVisualizer() {
      if (!isPlayingYouTube) {
        return;
      }
      
      // „É©„É≥„ÉÄ„É†„Å™ÂÄ§„ÇíÁîüÊàêÔºàÂÆüÈöõ„ÅÆÈü≥Â£∞„Éá„Éº„Çø„ÅÆ‰ª£„Çè„ÇäÔºâ
      for (let i = 0; i < randomDataArray.length; i++) {
        randomDataArray[i] = Math.random() * 255;
      }
      
      const width = visualizerCanvas.width;
      const height = visualizerCanvas.height;
      
      canvasCtx.fillStyle = 'rgba(0, 0, 0, 0.2)';
      canvasCtx.fillRect(0, 0, width, height);
      
      const barWidth = (width / randomDataArray.length) * 2.5;
      let barHeight;
      let x = 0;
      
      for (let i = 0; i < randomDataArray.length; i++) {
        barHeight = (randomDataArray[i] / 255) * height;
        
        const gradient = canvasCtx.createLinearGradient(0, height - barHeight, 0, height);
        gradient.addColorStop(0, '#660675');
        gradient.addColorStop(0.5, '#8800aa');
        gradient.addColorStop(1, '#aa00dd');
        
        canvasCtx.fillStyle = gradient;
        canvasCtx.fillRect(x, height - barHeight, barWidth, barHeight);
        
        canvasCtx.shadowBlur = 10;
        canvasCtx.shadowColor = '#660675';
        
        x += barWidth + 1;
      }
    }

    function drawVisualizer() {
      requestAnimationFrame(drawVisualizer);
      
      // YouTubeÂÜçÁîü‰∏≠„ÅØ„É©„É≥„ÉÄ„É†„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Çí‰ΩøÁî®
      if (isPlayingYouTube) {
        drawRandomVisualizer();
        return;
      }
      
      if (!analyser || !dataArray) return;
      
      analyser.getByteFrequencyData(dataArray);
      
      const width = visualizerCanvas.width;
      const height = visualizerCanvas.height;
      
      canvasCtx.fillStyle = 'rgba(0, 0, 0, 0.2)';
      canvasCtx.fillRect(0, 0, width, height);
      
      const barWidth = (width / bufferLength) * 2.5;
      let barHeight;
      let x = 0;
      
      for (let i = 0; i < bufferLength; i++) {
        barHeight = (dataArray[i] / 255) * height;
        
        const gradient = canvasCtx.createLinearGradient(0, height - barHeight, 0, height);
        gradient.addColorStop(0, '#660675');
        gradient.addColorStop(0.5, '#8800aa');
        gradient.addColorStop(1, '#aa00dd');
        
        canvasCtx.fillStyle = gradient;
        canvasCtx.fillRect(x, height - barHeight, barWidth, barHeight);
        
        canvasCtx.shadowBlur = 10;
        canvasCtx.shadowColor = '#660675';
        
        x += barWidth + 1;
      }
      
      canvasCtx.shadowBlur = 0;
    }

    function resizeCanvas() {
      const rect = visualizerCanvas.getBoundingClientRect();
      visualizerCanvas.width = rect.width;
      visualizerCanvas.height = rect.height;
    }

    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // YouTube IFrame API „ÅÆÊ∫ñÂÇôÔºà„Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞„Å®„Åó„Å¶ÂÆöÁæ©Ôºâ
    window.onYouTubeIframeAPIReady = function() {
      console.log('YouTube API is ready');
      isYoutubeReady = true;
      if (youtubeReadyCheckInterval) {
        clearInterval(youtubeReadyCheckInterval);
        youtubeReadyCheckInterval = null;
      }
      if (playlist.length > 0 && currentTrackIndex >= 0) {
        const currentTrack = playlist[currentTrackIndex];
        if (currentTrack && (currentTrack.type === 'youtube' || isYouTubeUrl(currentTrack.url))) {
          loadYouTubePlayer(currentTrack.url);
        }
      }
    };

    // Êó¢„Å´API„ÅåË™≠„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ
    function checkYouTubeAPI() {
      if (typeof YT !== 'undefined' && YT.Player) {
        console.log('YouTube API already loaded');
        isYoutubeReady = true;
        if (playlist.length > 0 && currentTrackIndex >= 0) {
          const currentTrack = playlist[currentTrackIndex];
          if (currentTrack && (currentTrack.type === 'youtube' || isYouTubeUrl(currentTrack.url))) {
            loadYouTubePlayer(currentTrack.url);
          }
        }
      }
    }

    // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂæå„Å´„ÉÅ„Çß„ÉÉ„ÇØ
    window.addEventListener('load', function() {
      setTimeout(checkYouTubeAPI, 1000);
    });

    // YouTube URL„Åã„Å©„ÅÜ„Åã„ÇíÂà§ÂÆö
    function isYouTubeUrl(url) {
      if (!url) return false;
      const youtubeRegex = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/;
      return youtubeRegex.test(url);
    }

    // YouTube„ÅÆURL„Åã„ÇâÂãïÁîªID„ÇíÊäΩÂá∫
    function extractVideoId(url) {
      if (!url) return null;
      const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
      const match = url.match(regExp);
      return (match && match[7].length === 11) ? match[7] : null;
    }

    // YouTube„Éó„É¨„Éº„É§„Éº„ÇíË™≠„ÅøËæº„ÇÄ
    function loadYouTubePlayer(url) {
      if (typeof YT === 'undefined' || !YT.Player) {
        console.error('YouTube API is not loaded');
        musicStatus.textContent = '‚è≥ YouTube API is loading. Please wait...';
        if (!youtubeReadyCheckInterval) {
          youtubeReadyCheckInterval = setInterval(function() {
            if (typeof YT !== 'undefined' && YT.Player) {
              clearInterval(youtubeReadyCheckInterval);
              youtubeReadyCheckInterval = null;
              isYoutubeReady = true;
              loadYouTubePlayer(url);
            }
          }, 100);
        }
        return;
      }

      const videoId = extractVideoId(url);
      if (!videoId) {
        musicStatus.textContent = 'Invalid YouTube URL';
        return;
      }

      if (youtubePlayer) {
        youtubePlayer.loadVideoById(videoId);
      } else {
        try {
          youtubePlayer = new YT.Player('youtubePlayer', {
            height: '160',
            width: '240',
            videoId: videoId,
            playerVars: {
              'autoplay': 0,
              'controls': 1,
              'rel': 0,
              'modestbranding': 1
            },
            events: {
              'onReady': onPlayerReady,
              'onStateChange': onPlayerStateChange
            }
          });
          youtubePlayerDiv.style.display = 'block';
        } catch (error) {
          console.error('Error creating YouTube player:', error);
          musicStatus.textContent = 'Error loading YouTube player';
        }
      }
    }

    function onPlayerReady(event) {
      if (volumeSlider) {
        event.target.setVolume(volumeSlider.value);
      }
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.ENDED) {
        if (playlist.length > 0) {
          currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
          loadTrack(currentTrackIndex);
          if (youtubePlayer) {
            youtubePlayer.playVideo();
          }
        }
      }
    }

    let playlist = [];
    let currentTrackIndex = -1;

    const defaultPlaylist = [
      { name: 'shakethat', url: 'music/ShakeThat.mp3', type: 'audio'}
    ];

    if (defaultPlaylist.length > 0) {
      playlist = [...defaultPlaylist];
      currentTrackIndex = 0;
      loadTrack(0);
      updatePlaylist();
    }

    uploadBtn.addEventListener('click', function() {
      musicFile.click();
    });

    musicFile.addEventListener('change', function(e) {
      const files = Array.from(e.target.files);
      
      files.forEach(function(file) {
        const url = URL.createObjectURL(file);
        playlist.push({
          name: file.name,
          url: url,
          type: 'audio'
        });
      });
      
      updatePlaylist();
      
      if (currentTrackIndex === -1 && playlist.length > 0) {
        currentTrackIndex = 0;
        loadTrack(0);
      }
      
      anime({
        targets: '.music-controls',
        scale: [1, 1.1, 1],
        duration: 300
      });
    });

    function addYouTubeTrack() {
      const url = youtubeUrl.value.trim();
      if (!url) {
        musicStatus.textContent = 'Please enter a YouTube URL';
        return;
      }

      if (!isYouTubeUrl(url)) {
        musicStatus.textContent = 'Invalid YouTube URL';
        return;
      }

      const videoId = extractVideoId(url);
      if (!videoId) {
        musicStatus.textContent = 'Could not extract video ID';
        return;
      }

      playlist.push({
        name: 'YouTube: ' + videoId,
        url: url,
        type: 'youtube',
        videoId: videoId
      });

      youtubeUrl.value = '';
      updatePlaylist();

      if (currentTrackIndex === -1 && playlist.length > 0) {
        currentTrackIndex = playlist.length - 1;
        loadTrack(currentTrackIndex);
      }

      anime({
        targets: '.music-controls',
        scale: [1, 1.1, 1],
        duration: 300
      });
    }

    addYoutubeBtn.addEventListener('click', addYouTubeTrack);
    
    youtubeUrl.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        addYouTubeTrack();
      }
    });

    function updatePlaylist() {
      playlistDiv.innerHTML = '';
      
      playlist.forEach(function(track, index) {
        const item = document.createElement('div');
        item.className = 'playlist-item';
        if (index === currentTrackIndex) {
          item.classList.add('active');
        }
        
        const name = document.createElement('span');
        name.textContent = (index + 1) + '. ' + track.name;
        
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'delete-btn';
        deleteBtn.textContent = '‚úï';
        deleteBtn.onclick = function(e) {
          e.stopPropagation();
          deleteTrack(index);
        };
        
        item.appendChild(name);
        item.appendChild(deleteBtn);
        
        item.onclick = function() {
          loadTrack(index);
          const track = playlist[index];
          if (track.type === 'youtube' || isYouTubeUrl(track.url)) {
            if (youtubePlayer) {
              setTimeout(function() {
                youtubePlayer.playVideo();
              }, 500);
            }
          } else {
            audio.play();
          }
        };
        
        playlistDiv.appendChild(item);
      });
      
      if (playlist.length === 0) {
        musicStatus.textContent = 'No tracks';
      }
    }

    function loadTrack(index) {
      if (index >= 0 && index < playlist.length) {
        currentTrackIndex = index;
        const track = playlist[index];
        
        if (track.type === 'youtube' || isYouTubeUrl(track.url)) {
          isPlayingYouTube = true;
          if (audio.src) {
            audio.pause();
            audio.src = '';
          }
          
          if (isYoutubeReady) {
            loadYouTubePlayer(track.url);
          } else {
            if (youtubeReadyCheckInterval) {
              clearInterval(youtubeReadyCheckInterval);
              youtubeReadyCheckInterval = null;
            }
            youtubeReadyCheckInterval = setInterval(function() {
              if (isYoutubeReady) {
                clearInterval(youtubeReadyCheckInterval);
                youtubeReadyCheckInterval = null;
                loadYouTubePlayer(track.url);
              }
            }, 100);
          }
          
          musicStatus.textContent = (index + 1) + '/' + playlist.length + ': ' + track.name;
        } else {
          isPlayingYouTube = false;
          if (youtubePlayer) {
            youtubePlayer.stopVideo();
            youtubePlayerDiv.style.display = 'none';
          }
          audio.src = track.url;
          musicStatus.textContent = (index + 1) + '/' + playlist.length + ': ' + track.name;
        }
        
        updatePlaylist();
      }
    }

    function deleteTrack(index) {
      playlist.splice(index, 1);
      
      if (index === currentTrackIndex) {
        if (playlist.length > 0) {
          currentTrackIndex = Math.min(index, playlist.length - 1);
          loadTrack(currentTrackIndex);
        } else {
          currentTrackIndex = -1;
          audio.src = '';
          musicStatus.textContent = 'No tracks';
        }
      } else if (index < currentTrackIndex) {
        currentTrackIndex--;
      }
      
      updatePlaylist();
    }

    playBtn.addEventListener('click', function() {
      if (currentTrackIndex >= 0 && currentTrackIndex < playlist.length) {
        const track = playlist[currentTrackIndex];
        
        if (track.type === 'youtube' || isYouTubeUrl(track.url)) {
          if (youtubePlayer) {
            youtubePlayer.playVideo();
            musicStatus.textContent = '‚ô™ Playing: ' + track.name;
          } else if (isYoutubeReady) {
            loadYouTubePlayer(track.url);
            setTimeout(function() {
              if (youtubePlayer) {
                youtubePlayer.playVideo();
              }
            }, 500);
          } else {
            musicStatus.textContent = '‚è≥ YouTube API is loading. Please wait...';
          }
        } else {
          if (audio.src) {
            setupAudioContext();
            audio.play();
            musicStatus.textContent = '‚ô™ Playing: ' + track.name;
          } else {
            musicStatus.textContent = 'Please add music first';
            return;
          }
        }
        
        anime({
          targets: '#playBtn',
          scale: [1, 1.2, 1],
          duration: 200
        });
      } else {
        musicStatus.textContent = 'Please add music first';
      }
    });

    pauseBtn.addEventListener('click', function() {
      if (currentTrackIndex >= 0 && currentTrackIndex < playlist.length) {
        const track = playlist[currentTrackIndex];
        
        if (track.type === 'youtube' || isYouTubeUrl(track.url)) {
          if (youtubePlayer) {
            youtubePlayer.pauseVideo();
            musicStatus.textContent = 'Paused';
          } else {
            musicStatus.textContent = '‚è≥ YouTube player is not ready yet';
          }
        } else {
          audio.pause();
          musicStatus.textContent = 'Paused';
        }
      }
      
      anime({
        targets: '#pauseBtn',
        scale: [1, 1.2, 1],
        duration: 200
      });
    });

    nextBtn.addEventListener('click', function() {
      if (playlist.length > 0) {
        currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
        loadTrack(currentTrackIndex);
        
        const track = playlist[currentTrackIndex];
        if (track.type === 'youtube' || isYouTubeUrl(track.url)) {
          if (youtubePlayer) {
            setTimeout(function() {
              youtubePlayer.playVideo();
            }, 500);
          } else if (isYoutubeReady) {
            setTimeout(function() {
              if (youtubePlayer) {
                youtubePlayer.playVideo();
              } else {
                musicStatus.textContent = '‚è≥ Loading YouTube player...';
              }
            }, 1000);
          } else {
            musicStatus.textContent = '‚è≥ YouTube API is loading. Please wait...';
          }
        } else {
          audio.play();
        }
        
        anime({
          targets: '#nextBtn',
          scale: [1, 1.2, 1],
          duration: 200
        });
      }
    });

    audio.addEventListener('ended', function() {
      if (playlist.length > 0) {
        const nextIndex = (currentTrackIndex + 1) % playlist.length;
        currentTrackIndex = nextIndex;
        loadTrack(currentTrackIndex);
        
        const track = playlist[currentTrackIndex];
        if (track.type === 'youtube' || isYouTubeUrl(track.url)) {
          if (youtubePlayer) {
            setTimeout(function() {
              youtubePlayer.playVideo();
            }, 500);
          } else if (isYoutubeReady) {
            setTimeout(function() {
              if (youtubePlayer) {
                youtubePlayer.playVideo();
              }
            }, 1000);
          }
        } else {
          audio.play();
        }
      }
    });

    volumeSlider.addEventListener('input', function(e) {
      const volume = e.target.value;
      audio.volume = volume / 100;
      if (youtubePlayer) {
        youtubePlayer.setVolume(volume);
      }
    });

    audio.volume = 0.5;

    (function() {
      const musicControls = document.getElementById('musicControls');
      let isDragging = false;
      let currentX, currentY, initialX, initialY;
      let xOffset = 0, yOffset = 0;

      musicControls.addEventListener('mousedown', dragStart);
      document.addEventListener('mousemove', drag);
      document.addEventListener('mouseup', dragEnd);

      musicControls.addEventListener('touchstart', dragStart);
      document.addEventListener('touchmove', drag);
      document.addEventListener('touchend', dragEnd);

      function dragStart(e) {
        if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') {
          return;
        }

        if (e.type === 'touchstart') {
          initialX = e.touches[0].clientX - xOffset;
          initialY = e.touches[0].clientY - yOffset;
        } else {
          initialX = e.clientX - xOffset;
          initialY = e.clientY - yOffset;
        }

        isDragging = true;
      }

      function drag(e) {
        if (isDragging) {
          e.preventDefault();

          if (e.type === 'touchmove') {
            currentX = e.touches[0].clientX - initialX;
            currentY = e.touches[0].clientY - initialY;
          } else {
            currentX = e.clientX - initialX;
            currentY = e.clientY - initialY;
          }

          xOffset = currentX;
          yOffset = currentY;

          setTranslate(currentX, currentY, musicControls);
        }
      }

      function dragEnd(e) {
        initialX = currentX;
        initialY = currentY;
        isDragging = false;
      }

      function setTranslate(xPos, yPos, el) {
        el.style.transform = 'translate(' + xPos + 'px, ' + yPos + 'px)';
      }
    })();

    const translations = {
      ja: {
        'nav-home': '„Éõ„Éº„É†',
        'nav-projects': '„Éó„É≠„Ç∏„Çß„ÇØ„Éà',
        'nav-about': '„Åì„ÅÆ„Çµ„Ç§„Éà„Å´„Å§„ÅÑ„Å¶',
        'welcome': '„Çà„ÅÜ„Åì„Åù',
        'scroll': '„Çπ„ÇØ„É≠„Éº„É´',
        'projects-title': '„Éó„É≠„Ç∏„Çß„ÇØ„Éà',
        'about-title': '„Åì„ÅÆ„Çµ„Ç§„Éà„Å´„Å§„ÅÑ„Å¶',
        'about-text': 'noct„ÅåÊ∞ó„Åæ„Åæ„Å´Âà∂‰Ωú„Åó„Åü‰ΩúÂìÅ„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åô„ÇãÂ†¥ÊâÄ„Åß„Åô„ÄÇ',
        'coming-soon': 'Coming Soon',
        'add-project-text': 'Coming Soon',
        'youtube-visualizer-note': '‚ÄªYouTube„ÅßËøΩÂä†„Åó„ÅüÊõ≤„ÅØ„Ç™„Éº„Éá„Ç£„Ç™„Çπ„Éö„ÇØ„Éà„É©„É†ÈùûÂØæÂøú„Åß„Åô„ÄÇ'
      },
      en: {
        'nav-home': 'Home',
        'nav-projects': 'Projects',
        'nav-about': 'About',
        'welcome': 'Welcome',
        'scroll': 'Scroll',
        'projects-title': 'Projects',
        'about-title': 'About',
        'about-text': 'This site is where noct casually uploads works they\'ve created.',
        'coming-soon': 'Coming Soon',
        'add-project-text': 'Coming Soon',
        'youtube-visualizer-note': '‚ÄªSongs added via YouTube do not support audio spectrum visualization.'
      }
    };

    let currentLang = 'ja';

    function switchLanguage(lang) {
      currentLang = lang;
      
      document.querySelectorAll('[data-lang-key]').forEach(function(element) {
        const key = element.getAttribute('data-lang-key');
        if (translations[lang][key]) {
          element.textContent = translations[lang][key];
        }
      });

      document.getElementById('langSwitcher').textContent = lang === 'ja' ? 'EN' : 'JA';
      regenerateProjects();
    }

    document.getElementById('langSwitcher').addEventListener('click', function() {
      switchLanguage(currentLang === 'ja' ? 'en' : 'ja');
    });

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('canvas-container').appendChild(renderer.domElement);
    
    const particlesGeometry = new THREE.BufferGeometry();
    const particlesCount = 1000;
    const posArray = new Float32Array(particlesCount * 3);
    
    for(let i = 0; i < particlesCount * 3; i++) {
      posArray[i] = (Math.random() - 0.5) * 100;
    }
    
    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
    
    const particlesMaterial = new THREE.PointsMaterial({
      size: 0.05,
      color: 0x670676,
      transparent: true,
      opacity: 0.8,
      blending: THREE.AdditiveBlending
    });
    
    const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particlesMesh);
    
    camera.position.z = 5;
    
    let mouseX = 0;
    let mouseY = 0;
    
    document.addEventListener('mousemove', function(e) {
      mouseX = (e.clientX / window.innerWidth) * 2 - 1;
      mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
    });
    
    function animate() {
      requestAnimationFrame(animate);
      particlesMesh.rotation.x += 0.0005;
      particlesMesh.rotation.y += 0.0005;
      particlesMesh.rotation.x += mouseY * 0.0001;
      particlesMesh.rotation.y += mouseX * 0.0001;
      renderer.render(scene, camera);
    }
    animate();
    
    window.addEventListener('resize', function() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    gsap.registerPlugin(ScrollTrigger);

    gsap.to('#header', { y: 0, duration: 1, ease: 'power3.out', delay: 0.5 });
    gsap.to('#logo', { opacity: 1, duration: 0.8, delay: 1 });
    gsap.to('#navLinks li', { opacity: 1, y: 0, duration: 0.6, stagger: 0.1, delay: 1.2 });

    const tl = gsap.timeline({ delay: 0.5 });
    tl.to('#heroIcon', { scale: 1, duration: 1, ease: 'elastic.out(1, 0.5)' })
      .to('#welcomeText', { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' }, '-=0.5')
      .to('#scrollIndicator', { opacity: 1, duration: 0.5 });

    gsap.to('#projectsTitle', {
      opacity: 1,
      scrollTrigger: { trigger: '#projects', start: 'top 80%', end: 'top 50%', scrub: 1 }
    });

    gsap.to('#aboutTitle', {
      opacity: 1,
      scrollTrigger: { trigger: '#about', start: 'top 80%', toggleActions: 'play none none reverse' }
    });

    gsap.to('#aboutContent', {
      opacity: 1, x: 0, duration: 1,
      scrollTrigger: { trigger: '#about', start: 'top 70%', toggleActions: 'play none none reverse' }
    });

    gsap.to('#footer', {
      opacity: 1,
      scrollTrigger: { trigger: '#footer', start: 'top 90%', toggleActions: 'play none none reverse' }
    });

    const menuToggle = document.getElementById('menuToggle');
    const navLinks = document.getElementById('navLinks');
    menuToggle.addEventListener('click', function() {
      navLinks.classList.toggle('active');
    });

    const projects = [
      { id: 1, title: 'Tetris', 
        description: 'Create by noct', 
        status: 'active', 
        link: 'tetris.html' },
      { id: 2, title: 'Maze',
        description: 'Create by noct',
        status: 'active',
        link: 'maze.html' },
      { id: 3, title: 'Memo and Todolist',
        description: 'Create by noct',
        status: 'active',
        link: 'memo.html'}
    ];

    function regenerateProjects() {
      const projectsGrid = document.getElementById('projectsGrid');
      projectsGrid.innerHTML = '';

      projects.forEach(function(project) {
        const card = document.createElement('div');
        card.className = 'project-card';
        
        let actionHTML = project.status === 'coming-soon' 
          ? '<span class="coming-soon">' + translations[currentLang]['coming-soon'] + '</span>'
          : '<a href="' + project.link + '" class="view-btn">View Project</a>';
        
        card.innerHTML = 
          '<div class="project-icon">' +
            '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">' +
              '<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>' +
              '<line x1="7" y1="2" x2="7" y2="22"></line>' +
              '<line x1="17" y1="2" x2="17" y2="22"></line>' +
              '<line x1="2" y1="12" x2="22" y2="12"></line>' +
              '<line x1="2" y1="7" x2="7" y2="7"></line>' +
              '<line x1="2" y1="17" x2="7" y2="17"></line>' +
              '<line x1="17" y1="17" x2="22" y2="17"></line>' +
              '<line x1="17" y1="7" x2="22" y2="7"></line>' +
            '</svg>' +
          '</div>' +
          '<h3>' + project.title + '</h3>' +
          '<p>' + project.description + '</p>' +
          actionHTML;
        
        projectsGrid.appendChild(card);

        gsap.to(card, {
          opacity: 1, y: 0, duration: 0.8,
          scrollTrigger: { trigger: card, start: 'top 85%', toggleActions: 'play none none reverse' }
        });
      });

      const addCard = document.createElement('div');
      addCard.className = 'project-card add-project';
      addCard.innerHTML = 
        '<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">' +
          '<polyline points="16 18 22 12 16 6"></polyline>' +
          '<polyline points="8 6 2 12 8 18"></polyline>' +
        '</svg>' +
        '<p>' + translations[currentLang]['add-project-text'] + '</p>';
      projectsGrid.appendChild(addCard);

      gsap.to(addCard, {
        opacity: 1, y: 0, duration: 0.8,
        scrollTrigger: { trigger: addCard, start: 'top 85%', toggleActions: 'play none none reverse' }
      });
    }

    regenerateProjects();

    document.querySelectorAll('a[href^="#"]').forEach(function(anchor) {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          window.scrollTo({ top: target.offsetTop, behavior: 'smooth' });
          navLinks.classList.remove('active');
        }
      });
    });

    let particleTimeout;
    document.addEventListener('mousemove', function(e) {
      if (particleTimeout) return;
      particleTimeout = setTimeout(function() { particleTimeout = null; }, 16);
      
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = e.clientX + 'px';
      particle.style.top = e.clientY + 'px';
      document.body.appendChild(particle);

      anime({
        targets: particle,
        opacity: [0.8, 0],
        scale: [1, 2],
        duration: 1000,
        easing: 'easeOutExpo',
        complete: function() { particle.remove(); }
      });
    });
  </script>
</body>
</html>